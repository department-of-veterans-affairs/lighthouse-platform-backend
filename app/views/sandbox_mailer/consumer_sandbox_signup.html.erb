<div>Welcome <%= @request[:firstName] %>,</div><br />

<div>You've successfully received sandbox access to the <%= list_apis(@request[:apis]) %>!</div><br />

<% if @kong_consumer.present? && @kong_consumer[:token].present? %>
  <div>Here's your key for accessing the development environment: <pre><%= @kong_consumer[:token] %></pre></div><br />

  <div>Your client username is: <pre><%= @kong_consumer[:kong_username] %></pre> Please reference this in any support request.</div><br />

  <div>You can use your key by including it as an HTTP request header <pre>apiKey: <%= @kong_consumer[:token] %></pre> in your requests to the API. You can find additional documentation at <a href="https://developer.va.gov">developer.va.gov</a></div><br />
<% end %>

<% if @okta_consumers.present? %>
  <% if @okta_consumers.dig(:ccg, :credentials).present? %>
    <div>Here's your Client Credentials Grant OAuth Client ID: <pre><%= @okta_consumers.dig(:ccg, :credentials, :oauthClient, :client_id) %></pre></div><br />

    <div>Please visit our OAuth documentation for implementation guidelines: <a href="https://developer.va.gov/explore/api/<%= get_api_metadata(@request[:apis]).dig('urlSlug') %>/client-credentials">https://developer.va.gov/explore/api/<%= get_api_metadata(@request[:apis]).dig('urlSlug') %>/client-credentials</a></div><br />
  <% end %>

  <% if @okta_consumers.dig(:acg, :credentials).present? %>
    <div><strong>Your OAuth client ID is:</strong> <pre><%= @okta_consumers.dig(:acg, :credentials, :oauthClient, :client_id) %></pre></div><br />

    <% if @okta_consumers.dig(:acg, :credentials, :oauthClient, :client_secret).present? %>
      <div><strong>Your OAuth client secret is:</strong> <pre><%= @okta_consumers.dig(:acg, :credentials, :oauthClient, :client_secret) %></pre></div><br />
    <% end %>

    <% if @okta_consumers.dig(:acg, :settings, :oauthClient, :redirect_uris).present? %>
      <div><strong>Your redirect URI is:</strong> <pre><%= @okta_consumers.dig(:acg, :settings, :oauthClient, :redirect_uris).first %></pre></div><br />
    <% end %>
    <% if @deeplink_url.present? %>
      <div>Your link to test data credentials is: <a href="https://developer.va.gov<%= @deeplink_url %>">https://developer.va.gov<%= @deeplink_url %></a></div><br />
    <% end %>
    <% if !@deeplink_url.present? %>
      <div><strong>Your link to test data credentials is:</strong> <a href="<%= get_api_oauth_info(@request[:apis]).dig('acgInfo', 'gitHubTestUsers') %>"><%= get_api_oauth_info(@request[:apis]).dig('acgInfo', 'gitHubTestUsers') %></a></div><br />
    <% end %>
    <div><strong>What's next?</strong></div><br />
    <div><strong>Start developing.</strong></div><br />
    <div><ol>
      <li>Use the above credentials to start developing in sandbox.</li>
      <% if @deeplink_url.present? %>
        <li>To access test data, go to the <a href="<%= get_api_oauth_info(@request[:apis]).dig('acgInfo', 'gitHubTestUsers') %>">test accounts GitHub page</a> and find test users that meet your use case.</li>
        <li>Then, use the link to test data credentials (above) to access further instructions and test user login data.</li>
        <li>We suggest bookmarking both the page with test data credentials and the GitHub page so you can return to them if you need other test accounts. The links to these pages do not expire.</li>
      <% end %>
      <% if !@deeplink_url.present? %>
        <li>Access sandbox test data from the <a href="<%= get_api_oauth_info(@request[:apis]).dig('acgInfo', 'gitHubTestUsers') %>">test accounts GitHub page</a>.</li>
      <% end %>
    </ol></div><br />
    <% if !@deeplink_url.present? %>
      <div><strong>A note:</strong> the way you access this data, and any test account credentials for ID.me, will change in early February, 2024. We will email you more information about this change, including instructions and a new access link, in February. For now, be sure to save any ID.me credentials you are using.</div><br />
    <% end %>
  <% end %>
<% end %>

<div>If you find a bug or would like to make a feature request, please open an issue through our Support page. We are continually working to improve our process and welcome <a href="https://developer.va.gov/support">feedback along your journey</a>.</div><br />

<div>When you're ready to move to a production environment, please follow the steps outlined on our <a href="https://developer.va.gov/go-live">Path to Production</a> page.</div><br />

<div>Thank you again,</div>
<div>VA API Platform Team</div> <br />
<div><strong>Read VA API Docs at: </strong><a href="https://developer.va.gov">developer.va.gov</a></div>
<div><strong>Get support: </strong><a href="https://github.com/department-of-veterans-affairs/vets-api-clients/issues/new/choose">Create Github Issue</a></div>
<div><strong>Email us at: </strong><a href="mailto:api@va.gov">api@va.gov</a></div>
